<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OpenAPI representations of MATLAB Production Server Types and Methods &mdash; OpenAPI Interface for MATLAB Production Server  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="_static/css/mathworks.css?v=45389b66" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=35a8b989"></script>
        <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Customization/Extending" href="Customization.html" />
    <link rel="prev" title="Deploy as endpoint to MATLAB Production Server" href="DeployToMPS.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            OpenAPI Interface for MATLAB Production Server
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="DeployToMPS.html">Deploy as endpoint to MATLAB Production Server</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">OpenAPI representations of MATLAB Production Server Types and Methods</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#heterogenous-array-item-definition">Heterogenous array item definition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Customization.html">Customization/Extending</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenAPI Interface for MATLAB Production Server</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">OpenAPI representations of MATLAB Production Server Types and Methods</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/MPSOpenAPI.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="openapi-representations-of-matlab-production-server-types-and-methods">
<h1>OpenAPI representations of MATLAB Production Server Types and Methods<a class="headerlink" href="#openapi-representations-of-matlab-production-server-types-and-methods" title="Link to this heading"></a></h1>
<p>OpenAPI Specification Version 3.0.3 appears to have mainly been designed with modern request and response bodies in mind where these bodies are JSON objects with multiple different <em>fields</em> to represent multiple different in- or outputs. For example, for a MATLAB function like:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span>[a,b]<span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">myFun</span><span class="p">(</span>x,y,z<span class="p">)</span>
<span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Hello &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="n">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">z</span><span class="p">;</span>
</pre></div>
</div>
<p>A typical modern REST interface for the input would look something like:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">200</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;z&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">300</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And responses which look something like:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hello value1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">500</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p>However, this is not what the actual MATLAB Production Server REST interface looks like, it is somewhat older and was designed before specs like the ones above became commonplace. MATLAB Production Server’s actual interface for the function above, in <a class="reference external" href="https://www.mathworks.com/help/mps/restfuljson/json-representation-of-matlab-data-types.html">large notation</a> is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nargout&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;rhs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="nt">&quot;mwtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mwsize&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;mwdata&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value1&quot;</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="nt">&quot;mwtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mwsize&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;mwdata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">200</span><span class="p">]},</span>
<span class="w">        </span><span class="p">{</span><span class="nt">&quot;mwtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mwsize&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;mwdata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">300</span><span class="p">]}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>or in small notation:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;nargout&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;rhs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;value1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">200</span><span class="p">],</span>
<span class="w">        </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">300</span><span class="p">]</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It <em>is</em> a JSON object as well, with fields like <code class="docutils literal notranslate"><span class="pre">nargout</span></code> (to specify the number of requested outputs) and <code class="docutils literal notranslate"><span class="pre">rhs</span></code>. But the actual function inputs are represented in one single ordered array in the <code class="docutils literal notranslate"><span class="pre">rhs</span></code> field. And unfortunately, OpenAPI 3.0.3 is limited with regards to how accurately arrays can be described: it is not possible to explicitly describe the order of the array elements, you can describe how many elements there are and you can describe the data types which the array may contain, <em>and</em> each type description has to be unique.</p>
<p>So, for the small notation example above, in OpenAPI 3.0.3 you can<em>not</em> say: <code class="docutils literal notranslate"><span class="pre">rhs</span></code> is an array with 3 elements and the elements are of primitive types: “string”, “array of doubles” and “array of doubles”. You may not say “array of doubles” <em>twice</em>, the type descriptions of array elements must be unique. So the best you <em>can</em> say here is that it is an array with 3 elements and the elements are a mix of primitive types “strings” and “arrays of doubles”. You cannot say that it is “string” once and “array of double” twice, let alone that you would be able to say that it is specifically the first element which is the “string” and then the second and third are “array of double”. Therefore small notation is <em>not</em> supported by the package. While it is possible to describe the API in a way which is <em>not wrong</em>, the description it is also <em>not accurate enough</em> to actually be useful.</p>
<p>For the large notation, luckily it is possible to describe each array element with an unique type description, even if there are duplicate underlying MATLAB types. In large notation, each array element is a JSON object rather than a JSON primitive and JSON objects can be described much more elaborately (with additional metadata) than primitives, which allows us to make sure each type description is unique. Strictly speaking we still cannot prescribe the exact order of the elements, but most OpenAPI tools/client generators will just keep the order in which the types were described in the first place.</p>
<p>In OpenAPI Specification Version 3.1.0, <code class="docutils literal notranslate"><span class="pre">prefixItems</span></code> was added to array descriptions which do allow describing exact array elements in their exact order, including duplicate type definitions if necessary. In that sense the MATLAB Production Server REST APIs can be more accurately described in version 3.1.0. And 3.1.0 should thus theoretically also allow describing the small notation accurately enough to become useful. Support for small notation has not been added to the package (yet) though. Also do note that many of the OpenAPI tooling/client generators do not (fully) support version 3.1.0 yet.</p>
<p>Similarly, in order to be able to accurately describe the in- and outputs, the generated specs may include <code class="docutils literal notranslate"><span class="pre">oneOf</span></code> and/or <code class="docutils literal notranslate"><span class="pre">anyOf</span></code> schemas where the level of support for <code class="docutils literal notranslate"><span class="pre">oneOf</span></code> and <code class="docutils literal notranslate"><span class="pre">anyOf</span></code> varies in different OpenAPI tooling/client generators.</p>
<section id="heterogenous-array-item-definition">
<h2>Heterogenous array item definition<a class="headerlink" href="#heterogenous-array-item-definition" title="Link to this heading"></a></h2>
<p>According to the OpenAPI 3.0.3 spec <a class="reference external" href="https://spec.openapis.org/oas/v3.0.3#properties">https://spec.openapis.org/oas/v3.0.3#properties</a>:</p>
<blockquote>
<div><p>items - Value <em>MUST</em> be an object and not an array. Inline or referenced schema <em>MUST</em> be of a Schema Object and not a standard JSON Schema. <code class="docutils literal notranslate"><span class="pre">items</span></code> MUST be present if the type is <code class="docutils literal notranslate"><span class="pre">array</span></code>.</p>
</div></blockquote>
<p>Meaning that in order to be able to describe an heterogenous array (which <code class="docutils literal notranslate"><span class="pre">lhs</span></code> and <code class="docutils literal notranslate"><span class="pre">rhs</span></code> typically are), an <code class="docutils literal notranslate"><span class="pre">anyOf</span></code> or <code class="docutils literal notranslate"><span class="pre">oneOf</span></code> object needs to be used. The spec is not entirely clear however, on which of the two options should be used (when). For example, for a definition as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<span class="nt">items</span><span class="p">:</span>
<span class="w">  </span><span class="nt">oneOf</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Some people and tooling (see for example <a class="reference external" href="https://www.baeldung.com/openapi-array-of-varying-types">https://www.baeldung.com/openapi-array-of-varying-types</a>) say this definition means that <em>for the entire array</em> you may choose <strong>one of</strong> the two options <code class="docutils literal notranslate"><span class="pre">string</span></code> or <code class="docutils literal notranslate"><span class="pre">integer</span></code>, essentially giving homogeneous arrays. So, for example, <code class="docutils literal notranslate"><span class="pre">[&quot;a&quot;,&quot;,b&quot;,&quot;c&quot;]</span></code> or <code class="docutils literal notranslate"><span class="pre">[1,2,3]</span></code> would be valid array instances, but <code class="docutils literal notranslate"><span class="pre">[&quot;a&quot;,2,&quot;c&quot;]</span></code> would not be. And these tools then say you should use <code class="docutils literal notranslate"><span class="pre">anyOf</span></code> instead, if you <em>do</em> want to allow a heterogeneous array with a mix of element types.</p></li>
<li><p>Other people and tooling (see for example <a class="reference external" href="https://swagger.io/docs/specification/data-models/data-types/#mixed-array">Mixed-Type Arrays section in the Swagger documentation</a>) say that you are <em>not</em> describing the <em>entire</em> array here at all, you are describing the <em>items</em> instead. So, the definition above then actually means that for <em>each and every</em> separate <em>item</em> in the array you may <em>independently</em> choose <strong>one of</strong> the options <code class="docutils literal notranslate"><span class="pre">string</span></code> or <code class="docutils literal notranslate"><span class="pre">integer</span></code>. So then, an heterogenous array with a mix of types (like <code class="docutils literal notranslate"><span class="pre">[1,&quot;b&quot;,3]</span></code>) is simply already allowed with <code class="docutils literal notranslate"><span class="pre">oneOf</span></code>. And these tools then basically also say that <code class="docutils literal notranslate"><span class="pre">oneOf</span></code> is the only option you ever need, and you never use <code class="docutils literal notranslate"><span class="pre">anyOf</span></code> at all here.</p></li>
</ul>
<p>By default the OpenAPI Interface for MATLAB Production Server generates specs including <code class="docutils literal notranslate"><span class="pre">anyOf</span></code>, i.e. following the first reasoning; but this <em>is</em> configurable.</p>
<p>In OpenAPI 3.1.0, this problem does not exist, for this version <code class="docutils literal notranslate"><span class="pre">prefixItems</span></code> is used instead of <code class="docutils literal notranslate"><span class="pre">items</span></code>. <code class="docutils literal notranslate"><span class="pre">prefixItems</span></code> is more accurate in the sense that it also really prescribed the order of the elements in the array. And, <code class="docutils literal notranslate"><span class="pre">prefixItems</span></code> does not require the usage of <code class="docutils literal notranslate"><span class="pre">oneOf</span></code> or <code class="docutils literal notranslate"><span class="pre">anyOf</span></code> in the first place.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="DeployToMPS.html" class="btn btn-neutral float-left" title="Deploy as endpoint to MATLAB Production Server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Customization.html" class="btn btn-neutral float-right" title="Customization/Extending" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 - 2024, MathWorks, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>